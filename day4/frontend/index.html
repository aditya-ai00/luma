<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Day 4 â€” Tutor</title>

  <style>
    body {background:#0b0f17;color:white;font-family:Poppins;display:flex;justify-content:center;padding-top:40px;}
    .card {
      width:420px;background:rgba(255,255,255,0.05);padding:20px;border-radius:16px;
      border:1px solid rgba(0,150,255,0.3);box-shadow:0 0 20px rgba(0,150,255,0.25);
    }
    .chat{max-height:280px;overflow-y:auto;background:#111522;padding:12px;border-radius:12px;margin-bottom:10px;}
    .bubble{padding:10px;border-radius:10px;margin:8px 0;}
    .user{background:#2142ff;margin-left:auto;}
    .bot{background:#222a38;}
    input,button{width:100%;padding:12px;margin-top:10px;border-radius:10px;border:none}
    input{background:#0d111a;color:#fff;}
    button{background:#4bccff;color:black;font-weight:700;}
    audio{width:100%;margin-top:10px;}
  </style>
</head>

<body>
  <div class="card">
    <h2>ðŸŽ“ Active Recall Tutor</h2>
    <div id="chat" class="chat"></div>
    <input id="text" placeholder="Type... (learn variables)" />
    <button onclick="sendText()">Send</button>
    <audio id="player" controls></audio>
  </div>

<script>
const api = "http://localhost:8000/api/tutor";
const chat = document.getElementById("chat");
const input = document.getElementById("text");
const player = document.getElementById("player");

function addMsg(msg, who) {
  const b = document.createElement("div");
  b.className = "bubble " + who;
  b.textContent = msg;
  chat.appendChild(b);
  chat.scrollTop = chat.scrollHeight;
}

async function sendText() {
  const text = input.value.trim();
  if (!text) return;

  addMsg(text, "user");
  input.value = "";

  const res = await fetch(api, {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({ text })
  });

  const data = await res.json();
  addMsg(data.reply, "bot");

  if (data.audioUrl) {
    player.src = data.audioUrl;
    player.play();
  }
}
</script>

</body>
</html>
